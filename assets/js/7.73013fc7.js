(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{180:function(e,t,r){"use strict";r.r(t);var o=r(0),c=Object(o.a)({},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content"},[e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),e._m(3),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),e._m(6),e._v(" "),e._m(7),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://zh.cppreference.com/w/cpp/language/sizeof",target:"_blank",rel:"noopener noreferrer"}},[e._v("sizeof"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://stackoverflow.com/questions/32931360/total-memory-of-a-c-class-object/32933422#32933422",target:"_blank",rel:"noopener noreferrer"}},[e._v("total memory of a C++ class object"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.zhihu.com/question/34955591",target:"_blank",rel:"noopener noreferrer"}},[e._v("cout << sizeof(vector<int>);输出是32，为什么？"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://zh.cppreference.com/w/cpp/container/vector",target:"_blank",rel:"noopener noreferrer"}},[e._v("std:vector"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://zh.cppreference.com/w/cpp/container/vector_bool",target:"_blank",rel:"noopener noreferrer"}},[e._v("std::vector<bool>"),r("OutboundLink")],1)])])])},[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"sizeof-vector-type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sizeof-vector-type","aria-hidden":"true"}},[this._v("#")]),this._v(" sizeof(vector<type>)")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"sizeof作用于vector和string对象"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sizeof作用于vector和string对象","aria-hidden":"true"}},[this._v("#")]),this._v(" sizeof作用于vector和string对象")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",[r("li",[e._v("由于我们知道C++标准仅规定了"),r("code",[e._v("sizeof(char)")]),e._v(","),r("code",[e._v("sizeof(char8_t)")]),e._v(","),r("code",[e._v("sizeof(signed char)")]),e._v("和"),r("code",[e._v("sizeof(unsigned char)")]),e._v("的返回值为1，但是对于其他情况的返回值依赖于计算机硬件平台，以及编译器的设置。只有对string对象或vector对象执行sizeof运算只返回该类型固定部分的大小，不会计算对象中的元素占用了多少空间。"),r("br"),e._v("\n所谓固定部分，也就是指vector或string对象在创建时，即使为空时也存在的对象。比如创建"),r("code",[e._v("vector<int>")]),e._v("对象会产生指针或size_t等用于实现的部分。")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"vector-int"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vector-int","aria-hidden":"true"}},[this._v("#")]),this._v(" vector<int>")])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",[r("li",[e._v("在测试"),r("code",[e._v("sizeof")]),e._v("对"),r("code",[e._v("vector<type>")]),e._v("值的时候发现，"),r("code",[e._v("sizeof<bool>")]),e._v("的值大于其他"),r("code",[e._v("sizeof<type>")]),e._v("的值。在VS2017 Community中可以看到"),r("code",[e._v("vector<int>")]),e._v("是有3个"),r("code",[e._v("int*")]),e._v("指针，分别用于指向第零元素，指向尾元素，指向对象最大存储空间的end："),r("br"),e._v(" "),r("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2018/jpeg/104558/1542618285742-43704300-c95b-4d5a-b0e3-01956b6e2f85.jpeg",alt:""}}),r("br"),e._v("\n而"),r("code",[e._v("vector<bool>")]),e._v("除了有3个"),r("code",[e._v("unsigned int*")]),e._v("指针以外，还有一个"),r("code",[e._v("_unsigned_int64")]),e._v("的"),r("code",[e._v("_Mysize")]),e._v("变量:"),r("br"),e._v(" "),r("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2018/jpeg/104558/1542618598652-1fcd630f-4f43-4733-b8e3-d09c1432c95e.jpeg",alt:""}})]),e._v(" "),r("li",[e._v("造成这一结果的原因是，"),r("code",[e._v("vector<bool>")]),e._v("在早期就被设计出来了，并不是一个STL容器，而早期的时候为了优化性能，vector对象里的并不是和"),r("code",[e._v("bool")]),e._v("对象一样是以byte的形式存储的，而是以bit位的形式存储的，因此使得其"),r("code",[e._v("vector<bool>")]),e._v("的元素并不是顺序存储的，也就是说并不能通过尾迭代器和首迭代器的差值来获得"),r("code",[e._v("vector<bool>")]),e._v("的元素个数，因此需要有一个专门变量用于统计元素个数。而C++标准并未编译器必须执行这一优化，也就是说是否对"),r("code",[e._v("vector<bool>")]),e._v("进行上述优化，取决于编译器。也正因为这一历史遗留原因带来的不可控，并不提倡在C++中使用"),r("code",[e._v("vector<bool>")]),e._v("。")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"summary"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#summary","aria-hidden":"true"}},[this._v("#")]),this._v(" Summary")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("由于"),t("code",[this._v("sizeof")]),this._v("的平台依赖性，对于sizeof的返回值不建议做任何提前假设。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"reference"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reference","aria-hidden":"true"}},[this._v("#")]),this._v(" Reference")])}],!1,null,null,null);t.default=c.exports}}]);