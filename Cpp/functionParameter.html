<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>函数形参的一些注意点 | 丫头</title>
    <meta name="description" content="Cockroachs apprentice">
    <link rel="shortcut icon" href="/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.880d747a.css" as="style"><link rel="preload" href="/assets/js/app.5cd958a4.js" as="script"><link rel="preload" href="/assets/js/5.2af5a774.js" as="script"><link rel="prefetch" href="/assets/js/10.1d3ef236.js"><link rel="prefetch" href="/assets/js/11.5ad2303d.js"><link rel="prefetch" href="/assets/js/3.d33b6324.js"><link rel="prefetch" href="/assets/js/4.11e6c145.js"><link rel="prefetch" href="/assets/js/6.1abda80e.js"><link rel="prefetch" href="/assets/js/7.73013fc7.js"><link rel="prefetch" href="/assets/js/8.a20f9f3f.js"><link rel="prefetch" href="/assets/js/9.4b9057f6.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.c27013e8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.880d747a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container custom-page-class"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">丫头</span></a> <div class="links" style="max-width:nullpx;"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Cpp/functionParameter.html" class="nav-link router-link-exact-active router-link-active">Cpp</a></div><div class="nav-item"><a href="/Linux/404.html" class="nav-link">Linux</a></div><div class="nav-item"><a href="/PAT/" class="nav-link">PAT</a></div><div class="nav-item"><a href="/Others/Summary/2018.html" class="nav-link">Others</a></div> <a href="https://github.com/FrogLu/FrogLu.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Cpp/functionParameter.html" class="nav-link router-link-exact-active router-link-active">Cpp</a></div><div class="nav-item"><a href="/Linux/404.html" class="nav-link">Linux</a></div><div class="nav-item"><a href="/PAT/" class="nav-link">PAT</a></div><div class="nav-item"><a href="/Others/Summary/2018.html" class="nav-link">Others</a></div> <a href="https://github.com/FrogLu/FrogLu.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Expression</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Cpp/lvalueRvalue.html" class="sidebar-link">lvalue&amp;rvalue</a></li><li><a href="/Cpp/sizeofVector.html" class="sidebar-link">sizeof(vector&lt;type&gt;)</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>Function</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/Cpp/functionParameter.html" class="active sidebar-link">函数形参的一些注意点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Cpp/functionParameter.html#参数传递" class="sidebar-link">参数传递</a></li><li class="sidebar-sub-header"><a href="/Cpp/functionParameter.html#数组引用" class="sidebar-link">数组引用</a></li><li class="sidebar-sub-header"><a href="/Cpp/functionParameter.html#reference" class="sidebar-link">Reference</a></li></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="函数形参的一些注意点"><a href="#函数形参的一些注意点" aria-hidden="true" class="header-anchor">#</a> 函数形参的一些注意点</h1> <h2 id="参数传递"><a href="#参数传递" aria-hidden="true" class="header-anchor">#</a> 参数传递</h2> <ul><li>参数传递分为值传递和引用传递，其中值传递分为以变量形参和指针形参，值传递均是通过拷贝实参的方式，来对形参进行初始化，而指针形参之所以能改变函数外变量的值，是因为尽管指针的值是拷贝的，导致和变量形参一样无法修改指针本身的值，但指针可以通过解引用符间接访问指针所指的对象，从而达到修改指针所指对象值的目的。但引用传递并不产生拷贝，因此在大的类类型对象或者容器对象时为了避免拷贝带来的低效，可以采用引用形参避免拷贝，而且对于有的类类型(包括IO类型在内)根本就不支持拷贝操作时，也就只能采用引用形参。</li> <li>对于引用形参需要特别注意的是，如果函数无需改变引用形参的值，最好将其声明为常量引用。常量引用除了能避免对引用对象的修改；由于并不能用常量、字符串字面值等对非常量引用初始化，而可以对常量引用初始化的原因，常量引用还能接受更多的实参类型。</li> <li>因此，相比于C语言中常常使用指针类型的形参访问函数外部的对象，C++更建议使用引用类型的形参替代指针。</li></ul> <h2 id="数组引用"><a href="#数组引用" aria-hidden="true" class="header-anchor">#</a> 数组引用</h2> <ul><li>对于数组和引用,如下声明是非法的</li></ul> <div class="language- extra-class"><pre class="language-text"><code>int i = 0, j = 0;
int &amp;arr[] = { i, j };
</code></pre></div><p>在VS2017 community的默认编译器及默认设置下，会产生<code>array of reference is not allowed</code>的报错。在google上搜索该错误后发现，在C++11标准草稿n3092的8.3.2/5中写道</p> <div class="language- extra-class"><pre class="language-text"><code>There shall be no references to references, no arrays of references,and no pointers to references.
</code></pre></div><p>原因大概是因为，数组名在绝大多数情况下会被隐式转换成指向数组首个元素的指针，而如果存储引用的数组合法的话，也就意味着存在指向引用的指针，而引用只是对象的别名，并没有大小，这也就导致指针其实并不能指向引用，而是只能指向引用所绑定的对象，另外指向引用的指针也无法像其他类型的指针一样进行指针的算术运算。因此存储引用的数组是非法的。</p> <h2 id="reference"><a href="#reference" aria-hidden="true" class="header-anchor">#</a> Reference</h2> <ul><li><a href="http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2010/n3092.pdf" target="_blank" rel="noopener noreferrer">FCD(n3092)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://stackoverflow.com/questions/1164266/why-are-arrays-of-references-illegal/33850870" target="_blank" rel="noopener noreferrer">Why are arrays of references illegal?<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://stackoverflow.com/questions/5460562/why-it-is-impossible-to-create-an-array-of-references-in-c" target="_blank" rel="noopener noreferrer">Why it is impossible to create an array of references in c++?<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.codeproject.com/Questions/203511/Why-array-of-references-not-allowed-in-C" target="_blank" rel="noopener noreferrer">Why array of references not allowed in C++<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">12/2/2018, 7:20:02 AM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Cpp/sizeofVector.html" class="prev">
          sizeof(vector&lt;type&gt;)
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.5cd958a4.js" defer></script><script src="/assets/js/5.2af5a774.js" defer></script>
  </body>
</html>
